<script>
(async (w,d,base)=>{
  var opt ={ mode : 'cors'}, type='text/html', pair, response;
  var template = await w.fetch('https://raw.githubusercontent.com/frdl/frdl/gh-pages/_layouts/default.html', opt);
  template=await template.text();
  var uri = w.location.pathname.substr(1);
  if('/' === uri.substr(-1)){
    uri += 'index';
  }
  response = await fetch(base + uri, opt);
  if(200 !== response.status){
      response = await fetch(base + uri + '.md', opt);
  }
  if(200 !== response.status){
      response = await fetch(base + uri + '.html', opt);
  }
  if(200 !== response.status){
      response = await fetch(base + uri + '.php', opt);
  }
  
  for ( pair of response.headers.entries()) {
   if('content-type'===pair[0]){
       type = pair[1];
     break;
   }
  }

var content=200 === response.status ? await response.text() : 'Not found.'; 
  
  switch(type){
    case 'text/markdown':
         content ='<div frdl-markdown>'+content+'</div>';
      break;
    default:

      break;
  }

var nc = template.replace(/\{\%\sseo\s\%\}/, '').replace(/\{\{ content \}\}/, content);
document.open();
document.write(nc);
document.close();
})( window, document, 'https://website.webfan3.de/io4all/' );	
</script>	
